<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>
    
    ä¸Šé‚ª</title>
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  
    <link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">
  
  <script src="/js/pace.min.js"></script>
  <!-- <script src="https://leancloud.cn/scripts/lib/av-0.4.6.min.js"></script>
  <script>AV.initialize("Cirh9OyzJLKMMq9RNThKaiAA-gzGzoHsz", "blnHQ35jvRhUS6eJMJmAT3Fc");</script> -->
</head>
</html>
<body>
<main class="content">
  <section class="outer">
  

<article id="post-è¯¯åˆ stashçš„è¡¥æ•‘æ–¹æ¡ˆ" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>
  
  <div class="article-inner">
    

    
      <div class="article-meta">
        <a href="/2019/11/26/è¯¯åˆ stashçš„è¡¥æ•‘æ–¹æ¡ˆ/" class="article-date">
  <time datetime="2019-11-26T12:53:48.063Z" itemprop="datePublished">2019-11-26</time>
</a>
        
      </div>
    

    
      
    <div class="tocbot"></div>





    

    <div class="article-entry" itemprop="articleBody">
      


      

      
        <h2 id="è¯¯åˆ stashçš„ç»ˆææ–¹æ¡ˆ"><a href="#è¯¯åˆ stashçš„ç»ˆææ–¹æ¡ˆ" class="headerlink" title="è¯¯åˆ stashçš„ç»ˆææ–¹æ¡ˆ"></a>è¯¯åˆ stashçš„ç»ˆææ–¹æ¡ˆ</h2><p>æœ€è¿‘ç”±äºå‡ ä¸ªé¡¹ç›®åŒæ—¶æ”¹ bugçš„ç¼˜æ•…ï¼Œå’Œstash æ ¼å¤–äº²å¯† ã€‚ stashå¯¹å¤šåˆ†æ”¯å¼€å‘æ˜¯çœŸçš„å‹å¥½ï¼Œå‰ææ˜¯ä½ æ²¡è¯¯åˆ  Â·Â·Â·Â·Â·Â·</p>
<p>è¿™ä¸ï¼Œæ˜¨å¤©åˆ‡æ¢åˆ†æ”¯çš„æ—¶å€™ï¼Œä¸å°å¿ƒæŠŠstashB pop åˆ°äº†Aåˆ†æ”¯ä¸Šï¼Œè‡ªå·±ä¸€çœ‹æ‡µé€¼äº†ï¼Œå€’æ˜¯æ‰‹å¿«ç›´æ¥æ’¤é”€stashæš‚</p>
<p>å­˜ï¼Œç„¶åæŠŠAçš„stash popå‡ºæ¥å®Œæˆäº†Aåˆ†æ”¯çš„å¼€å‘ ã€‚ ä»Šå¤©ä¸€çœ‹bugåˆ—è¡¨ï¼Œéƒ½æ˜¯Båˆ†æ”¯çš„ï¼Œåˆ‡è¿‡å»æ”¹å§ï¼Œä¸€çœ‹stash </p>
<p>listé‡Œé¢å·²ç„¶æ²¡æœ‰Bçš„æš‚å­˜äº†ã€‚å°†å°½ä¸€å‘¨çš„å¿ƒè¡€ï¼Œæ²¡äº† ã€‚ æ±‚åŠ©åº¦å¨˜ï¼Œåˆ°ä¸‹åˆå·²ç»è§£å†³å®Œæ¯•ï¼Œç°åœ¨è®°å½•ä¸€ä¸‹æ¶‰åŠåˆ°çš„</p>
<p>çŸ¥è¯†ç‚¹å§ï¼Œå¦å¤–å‘ç°ï¼Œçº¯äººå·¥æ“ä½œï¼Œç‰¹åˆ«è€—æ—¶ï¼Œæˆ‘äººå·¥æ‰¾å›æ¥ç”¨äº†å°†è¿‘ä¸‰ä¸ªå°æ—¶ä¸€ä¸ªä¸€ä¸ªå»show commit_id ã€‚  </p>
<p>æ™šä¸Šå›æ¥æ•´ç†å†™äº†ä¸€ä¸ªbashè„šæœ¬  ã€‚æ–‡æœ«è‡ªå–å“¦ ã€‚ã€‚ä¸è°¢ </p>
<a id="more"></a>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">git stash list //ç¡®è®¤ä½ çš„stashåˆ—è¡¨ç¡®å®ä¸¢æ‰äº†ä½ æƒ³è¦stash</span><br><span class="line"></span><br><span class="line">æ¥ä¸‹æ¥æŠŠä¸‹é¢æ¯ä¸ªå‘½ä»¤æ•²æ‰“ä½ çš„shellé‡Œ</span><br><span class="line">//æ˜¾ç¤ºå‡ºæ‰€æœ‰ä¸å¯è®¿é—®çš„å¯¹è±¡ï¼Œå°±ç†è§£æˆstash listé‡Œçœ‹ä¸åˆ°çš„ï¼Œæš‚æ—¶è¢«æ”¾å¼ƒå¼•ç”¨çš„ã€‚</span><br><span class="line">//è¿™é‡Œä¸€èˆ¬éƒ½å¾ˆå¤šï¼Œå»ºè®®ç›´æ¥è¾“å‡ºåˆ°æ–‡ä»¶é‡Œï¼Œæ–¹ä¾¿æŸ¥çœ‹ ä½¿ç”¨ git fsck --unreachable &gt; stash.txt </span><br><span class="line">git fsck --unreachable  </span><br><span class="line"></span><br><span class="line">//ä¸€ä¸ªä¸€ä¸ªçš„æŸ¥çœ‹å“ªä¸ªæ˜¯è¢«ä½ è¯¯åˆ çš„stash  &lt;shr&gt;æŒ‡çš„æ˜¯ğŸ‘†åˆ—è¡¨å†…çš„id</span><br><span class="line">åœ¨è¿™é‡Œéœ€è¦âš ï¸ ä½ åªéœ€è¦å…³å¿ƒcommit ç±»å‹çš„ blobå’Œtreeçš„æ˜¯æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼Œ</span><br><span class="line">ä¸€èˆ¬æ— æ³•stash apply ç›´æ¥ç•¥è¿‡å°±å¥½ã€‚ä¸€æ¡ä¸€æ¡çš„å¾ˆéš¾æ‰¾ï¼Œå…³é”®è¿˜æ˜¯æ²¡æœ‰é¡ºåºçš„</span><br><span class="line">git show &lt;shr&gt;          </span><br><span class="line"></span><br><span class="line">æ‰¾åˆ°ä½ æƒ³æ‰¾åˆ°çš„é‚£æ¡id </span><br><span class="line">git stash apply id  å°±åˆ°ä½ ä¸¢å¤±çš„å·¥ä½œåŒºäº† ã€‚</span><br></pre></td></tr></table></figure>

<p>è„šæœ¬</p>
<p>åœ¨ä½ é¡¹ç›®ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªfind-stash.sh æ–‡ä»¶</p>
<p>æ–‡ä»¶å†…å¤åˆ¶ä»¥ä¸‹å†…å®¹ã€ä¿å­˜</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># git fsck --unreachable &gt; stash.txt</span><br><span class="line">#!/bin/bash</span><br><span class="line">#å°†ç»“æœè¾“å‡ºåˆ°stash.txtæ–‡ä»¶å†…</span><br><span class="line"># git fsck --unreachable &gt; stash.txt</span><br><span class="line">#ä»stash.txtæ–‡ä»¶é‡Œé€è¡Œè¯»å–æ•°æ®</span><br><span class="line">while read LINE</span><br><span class="line">do</span><br><span class="line">  #æŒ‰ç©ºç™½ç¬¦åˆ†å‰²å½“å‰è¡Œå­—ç¬¦ä¸²ï¼Œæ‹¿åˆ°ç¬¬äºŒä¸ªæ•°æ®ï¼Œç¬¬äºŒä¸ªæ˜¯ç±»å‹commit æˆ–è€…blobæˆ–è€…tree</span><br><span class="line">  temp_str=`echo $LINE|cut -d &quot; &quot; -f2`</span><br><span class="line">  if [[ $temp_str = &quot;commit&quot; ]]; then</span><br><span class="line">    #è·å–åˆ°commit_id</span><br><span class="line">    commit_id=`echo $LINE|cut -d &quot; &quot; -f3`</span><br><span class="line">    #æŠŠgit show çš„å†…å®¹é€æ¡æ”¾åˆ°commit_result.txtæ–‡ä»¶å†…</span><br><span class="line">    git show $commit_id &gt;&gt; commit_result.txt</span><br><span class="line">  fi</span><br><span class="line">done &lt; stash.txt</span><br></pre></td></tr></table></figure>

<p>å‘½ä»¤è¡Œæ‰§è¡Œ ./find-stash.sh</p>
<p>âš ï¸ æ­¤æ—¶å¯èƒ½ä¼šæç¤º permission denied , åˆ‡æ¢åˆ°ç³»ç»Ÿrootç”¨æˆ·ï¼Œæ‰§è¡Œ chmod 777 find-stash.sh</p>
<p>ä¹‹åå† ./find-stash.sh  </p>
<p>ä¼šçœ‹åˆ°é¡¹ç›®æ–‡ä»¶é‡Œå¤šå‡ºä¸¤ä¸ªæ–‡ä»¶  stash.txt å’Œ commit_result.txt   åœ¨commit_resulté‡Œæœç´¢ä½ è¦çš„æ¡ä»¶ï¼Œæ¯”å¦‚æ—¥æœŸNov 25 å°±æ˜¯11æœˆ25å·çš„stashï¼Œå¯¹æ¯”diffå†…å®¹ï¼Œç¬¦åˆéœ€æ±‚ git stash apply commit_id   æå®š </p>
<p>ğŸ’— </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://w-yunting.github.io/2019/11/26/è¯¯åˆ stashçš„è¡¥æ•‘æ–¹æ¡ˆ/" data-id="ck3nuqd02000ajs147o701e3l"
         class="article-share-link">Share</a>
      
    </footer>

  </div>

  
    
  <nav class="article-nav">
    
      <a href="/2019/12/01/Vue2.0å’Œ3.0æ•°æ®å“åº”åŸç†/" class="article-nav-link">
        <strong class="article-nav-caption">Newer posts</strong>
        <div class="article-nav-title">
          
            (no title)
          
        </div>
      </a>
    
    
      <a href="/2019/11/24/Vueè‡ªå®šä¹‰æŒ‡ä»¤/" class="article-nav-link">
        <strong class="article-nav-caption">Olde posts</strong>
        <div class="article-nav-title"></div>
      </a>
    
  </nav>


  

  
    
  

</article>



</section>
  <footer class="footer">
  <div class="outer">
    <div class="float-right">
      <ul class="list-inline">
  
    <li><i class="fe fe-smile-alt"></i> <span id="busuanzi_value_site_uv"></span></li>
  
</ul>
    </div>
    <ul class="list-inline">
      <li class="">&copy; 2019 ä¸Šé‚ª</li>
    </ul>
  </div>
</footer>

</main>

<aside class="sidebar sidebar-specter">
  
    <button class="navbar-toggle"></button>
<nav class="navbar">
  
    <div class="logo">
      <a href="/"><img src="/images/hexo.svg" alt="ä¸Šé‚ª"></a>
    </div>
  
  <ul class="nav nav-main">
    
      <li class="nav-item">
        <a class="nav-item-link" href="/">Home</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/archives">Archives</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/gallery">Gallery</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/about">About</a>
      </li>
    
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="Search">
        <i class="fe fe-search"></i>
        Search
      </a>
    </li>
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      <div class="totop" id="totop">
  <i class="fe fe-rocket"></i>
</div>
    </li>
    <li class="nav-item">
      
        <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
          <i class="fe fe-feed"></i>
        </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
  </aside>
  <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/lazyload.min.js"></script>
<script src="/js/busuanzi-2.3.pure.min.js"></script>

  <script src="/fancybox/jquery.fancybox.min.js"></script>



  <script src="/js/tocbot.min.js"></script>
  <script>
    // Tocbot_v4.7.0  http://tscanlin.github.io/tocbot/
    tocbot.init({
      tocSelector: '.tocbot',
      contentSelector: '.article-entry',
      headingSelector: 'h1, h2, h3, h4, h5, h6',
      hasInnerContainers: true,
      scrollSmooth: true,
      positionFixedSelector: '.tocbot',
      positionFixedClass: 'is-position-fixed',
      fixedSidebarOffset: 'auto',
    });
  </script>


<script src="/js/ocean.js"></script>
<!--
//page counter part
<script>
  function addCount (Counter) {
          url=$('.article-date').attr('href').trim();
      title = $('.article-title').text().trim();
      var query=new AV.Query(Counter);
      //use url as unique idnetfication
      query.equalTo("url",url);
      query.find({
          success: function(results){
              if(results.length>0)
              {
                  var counter=results[0];
                  counter.fetchWhenSave(true); //get recent result
                  counter.increment("time");
                  counter.save();
              }
              else
              {
                  var newcounter=new Counter();
                  newcounter.set("title",title);
                  newcounter.set("url",url);
                  newcounter.set("time",1);
                  newcounter.save(null,{
                      success: function(newcounter){
                         //alert('New object created');
                    },
                    error: function(newcounter,error){
                    alert('Failed to create');
                    }
                    });
            }
        },
        error: function(error){
            //find null is not a error
            alert('Error:'+error.code+" "+error.message);
        }
    });
}
$(function(){
    var Counter=AV.Object.extend("Counter");
    //only increse visit counting when intering a page
    if ($('.article-title').length == 1)
       addCount(Counter);
    var query=new AV.Query(Counter);
    query.descending("time");
    // the sum of popular posts
    query.limit(10); 
    query.find({
        success: function(results){
                for(var i=0;i<results.length;i++)    
                {
                    var counter=results[i];
                    title=counter.get("title");
                    url=counter.get("url");
                    time=counter.get("time");
                    // add to the popularlist widget
                    showcontent=title+" ("+time+")";
                    //notice the "" in href
                    $('.popularlist').append('<li><a href="'+url+'">'+showcontent+'</a></li>');
                }
            },
        error: function(error){
            alert("Error:"+error.code+" "+error.message);
        }
        }
    )
    });
-->

</body>
</html>